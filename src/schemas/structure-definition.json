{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "FHIR StructureDefinition",
  "description": "Schema for FHIR StructureDefinition resources including logical models",
  "properties": {
    "resourceType": {
      "type": "string",
      "const": "StructureDefinition"
    },
    "id": {
      "type": "string",
      "format": "fhir-id",
      "description": "Logical id of this artifact"
    },
    "url": {
      "type": "string",
      "format": "fhir-canonical",
      "description": "Canonical identifier for this structure definition"
    },
    "version": {
      "type": "string",
      "description": "Business version of the structure definition"
    },
    "name": {
      "type": "string",
      "pattern": "^[A-Z]([A-Za-z0-9_]){0,254}$",
      "description": "Name for this structure definition (computer friendly)"
    },
    "title": {
      "type": "string",
      "description": "Name for this structure definition (human friendly)"
    },
    "status": {
      "type": "string",
      "enum": ["draft", "active", "retired", "unknown"],
      "description": "The status of this structure definition"
    },
    "experimental": {
      "type": "boolean",
      "description": "For testing purposes, not real usage"
    },
    "date": {
      "type": "string",
      "format": "date-time",
      "description": "Date last changed"
    },
    "publisher": {
      "type": "string",
      "description": "Name of the publisher (organization or individual)"
    },
    "contact": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ContactDetail"
      },
      "description": "Contact details for the publisher"
    },
    "description": {
      "type": "string",
      "description": "Natural language description of the structure definition"
    },
    "useContext": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/UsageContext"
      },
      "description": "The context that the content is intended to support"
    },
    "jurisdiction": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/CodeableConcept"
      },
      "description": "Intended jurisdiction for structure definition"
    },
    "purpose": {
      "type": "string",
      "description": "Why this structure definition is defined"
    },
    "copyright": {
      "type": "string",
      "description": "Use and/or publishing restrictions"
    },
    "keyword": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Coding"
      },
      "description": "Assist with indexing and finding"
    },
    "fhirVersion": {
      "type": "string",
      "description": "FHIR Version this StructureDefinition targets"
    },
    "mapping": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/StructureDefinitionMapping"
      },
      "description": "External specification that the content is mapped to"
    },
    "kind": {
      "type": "string",
      "enum": ["primitive-type", "complex-type", "resource", "logical"],
      "description": "Defines the kind of structure that this definition is describing"
    },
    "abstract": {
      "type": "boolean",
      "description": "Whether the structure is abstract"
    },
    "context": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/StructureDefinitionContext"
      },
      "description": "If an extension, where it can be used in instances"
    },
    "contextInvariant": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "FHIRPath invariants - when the extension can be used"
    },
    "type": {
      "type": "string",
      "format": "fhir-uri",
      "description": "Type defined or constrained by this structure"
    },
    "baseDefinition": {
      "type": "string",
      "format": "fhir-canonical",
      "description": "Definition that this type is constrained/specialized from"
    },
    "derivation": {
      "type": "string",
      "enum": ["specialization", "constraint"],
      "description": "How this type relates to the baseDefinition"
    },
    "snapshot": {
      "$ref": "#/definitions/StructureDefinitionSnapshot",
      "description": "Snapshot view of the structure"
    },
    "differential": {
      "$ref": "#/definitions/StructureDefinitionDifferential",
      "description": "Differential view of the structure"
    }
  },
  "required": ["resourceType", "url", "name", "status", "kind", "abstract", "type"],
  "additionalProperties": false,
  "definitions": {
    "ContactDetail": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "telecom": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ContactPoint"
          }
        }
      },
      "additionalProperties": false
    },
    "ContactPoint": {
      "type": "object",
      "properties": {
        "system": {
          "type": "string",
          "enum": ["phone", "fax", "email", "pager", "url", "sms", "other"]
        },
        "value": {
          "type": "string"
        },
        "use": {
          "type": "string",
          "enum": ["home", "work", "temp", "old", "mobile"]
        },
        "rank": {
          "type": "integer",
          "minimum": 1
        },
        "period": {
          "$ref": "#/definitions/Period"
        }
      },
      "additionalProperties": false
    },
    "Period": {
      "type": "object",
      "properties": {
        "start": {
          "type": "string",
          "format": "date-time"
        },
        "end": {
          "type": "string",
          "format": "date-time"
        }
      },
      "additionalProperties": false
    },
    "UsageContext": {
      "type": "object",
      "properties": {
        "code": {
          "$ref": "#/definitions/Coding"
        },
        "valueCodeableConcept": {
          "$ref": "#/definitions/CodeableConcept"
        },
        "valueQuantity": {
          "$ref": "#/definitions/Quantity"
        },
        "valueRange": {
          "$ref": "#/definitions/Range"
        },
        "valueReference": {
          "$ref": "#/definitions/Reference"
        }
      },
      "required": ["code"],
      "additionalProperties": false
    },
    "CodeableConcept": {
      "type": "object",
      "properties": {
        "coding": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Coding"
          }
        },
        "text": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "Coding": {
      "type": "object",
      "properties": {
        "system": {
          "type": "string",
          "format": "uri"
        },
        "version": {
          "type": "string"
        },
        "code": {
          "type": "string"
        },
        "display": {
          "type": "string"
        },
        "userSelected": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "Quantity": {
      "type": "object",
      "properties": {
        "value": {
          "type": "number"
        },
        "comparator": {
          "type": "string",
          "enum": ["<", "<=", ">=", ">", "ad"]
        },
        "unit": {
          "type": "string"
        },
        "system": {
          "type": "string",
          "format": "uri"
        },
        "code": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "Range": {
      "type": "object",
      "properties": {
        "low": {
          "$ref": "#/definitions/Quantity"
        },
        "high": {
          "$ref": "#/definitions/Quantity"
        }
      },
      "additionalProperties": false
    },
    "Reference": {
      "type": "object",
      "properties": {
        "reference": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "format": "uri"
        },
        "identifier": {
          "$ref": "#/definitions/Identifier"
        },
        "display": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "Identifier": {
      "type": "object",
      "properties": {
        "use": {
          "type": "string",
          "enum": ["usual", "official", "temp", "secondary", "old"]
        },
        "type": {
          "$ref": "#/definitions/CodeableConcept"
        },
        "system": {
          "type": "string",
          "format": "uri"
        },
        "value": {
          "type": "string"
        },
        "period": {
          "$ref": "#/definitions/Period"
        },
        "assigner": {
          "$ref": "#/definitions/Reference"
        }
      },
      "additionalProperties": false
    },
    "StructureDefinitionMapping": {
      "type": "object",
      "properties": {
        "identity": {
          "type": "string",
          "format": "fhir-id"
        },
        "uri": {
          "type": "string",
          "format": "uri"
        },
        "name": {
          "type": "string"
        },
        "comment": {
          "type": "string"
        }
      },
      "required": ["identity"],
      "additionalProperties": false
    },
    "StructureDefinitionContext": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["fhirpath", "element", "extension"]
        },
        "expression": {
          "type": "string"
        }
      },
      "required": ["type", "expression"],
      "additionalProperties": false
    },
    "StructureDefinitionSnapshot": {
      "type": "object",
      "properties": {
        "element": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ElementDefinition"
          },
          "minItems": 1
        }
      },
      "required": ["element"],
      "additionalProperties": false
    },
    "StructureDefinitionDifferential": {
      "type": "object",
      "properties": {
        "element": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ElementDefinition"
          },
          "minItems": 1
        }
      },
      "required": ["element"],
      "additionalProperties": false
    },
    "ElementDefinition": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "path": {
          "type": "string"
        },
        "sliceName": {
          "type": "string"
        },
        "sliceIsConstraining": {
          "type": "boolean"
        },
        "label": {
          "type": "string"
        },
        "code": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Coding"
          }
        },
        "slicing": {
          "$ref": "#/definitions/ElementDefinitionSlicing"
        },
        "short": {
          "type": "string"
        },
        "definition": {
          "type": "string"
        },
        "comment": {
          "type": "string"
        },
        "requirements": {
          "type": "string"
        },
        "alias": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "min": {
          "type": "integer",
          "minimum": 0
        },
        "max": {
          "type": "string"
        },
        "base": {
          "$ref": "#/definitions/ElementDefinitionBase"
        },
        "contentReference": {
          "type": "string"
        },
        "type": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ElementDefinitionType"
          }
        },
        "meaningWhenMissing": {
          "type": "string"
        },
        "orderMeaning": {
          "type": "string"
        },
        "fixedString": {
          "type": "string"
        },
        "fixedBoolean": {
          "type": "boolean"
        },
        "fixedInteger": {
          "type": "integer"
        },
        "fixedDecimal": {
          "type": "number"
        },
        "fixedUri": {
          "type": "string",
          "format": "uri"
        },
        "fixedUrl": {
          "type": "string",
          "format": "uri"
        },
        "fixedCode": {
          "type": "string"
        },
        "fixedDate": {
          "type": "string",
          "format": "date"
        },
        "fixedDateTime": {
          "type": "string",
          "format": "date-time"
        },
        "fixedTime": {
          "type": "string"
        },
        "fixedInstant": {
          "type": "string",
          "format": "date-time"
        },
        "fixedCodeableConcept": {
          "$ref": "#/definitions/CodeableConcept"
        },
        "fixedCoding": {
          "$ref": "#/definitions/Coding"
        },
        "fixedQuantity": {
          "$ref": "#/definitions/Quantity"
        },
        "fixedPeriod": {
          "$ref": "#/definitions/Period"
        },
        "fixedRange": {
          "$ref": "#/definitions/Range"
        },
        "fixedReference": {
          "$ref": "#/definitions/Reference"
        },
        "patternString": {
          "type": "string"
        },
        "patternBoolean": {
          "type": "boolean"
        },
        "patternInteger": {
          "type": "integer"
        },
        "patternDecimal": {
          "type": "number"
        },
        "patternUri": {
          "type": "string",
          "format": "uri"
        },
        "patternUrl": {
          "type": "string",
          "format": "uri"
        },
        "patternCode": {
          "type": "string"
        },
        "patternDate": {
          "type": "string",
          "format": "date"
        },
        "patternDateTime": {
          "type": "string",
          "format": "date-time"
        },
        "patternTime": {
          "type": "string"
        },
        "patternInstant": {
          "type": "string",
          "format": "date-time"
        },
        "patternCodeableConcept": {
          "$ref": "#/definitions/CodeableConcept"
        },
        "patternCoding": {
          "$ref": "#/definitions/Coding"
        },
        "patternQuantity": {
          "$ref": "#/definitions/Quantity"
        },
        "patternPeriod": {
          "$ref": "#/definitions/Period"
        },
        "patternRange": {
          "$ref": "#/definitions/Range"
        },
        "patternReference": {
          "$ref": "#/definitions/Reference"
        },
        "example": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ElementDefinitionExample"
          }
        },
        "minValueDate": {
          "type": "string",
          "format": "date"
        },
        "minValueDateTime": {
          "type": "string",
          "format": "date-time"
        },
        "minValueInstant": {
          "type": "string",
          "format": "date-time"
        },
        "minValueTime": {
          "type": "string"
        },
        "minValueDecimal": {
          "type": "number"
        },
        "minValueInteger": {
          "type": "integer"
        },
        "minValueQuantity": {
          "$ref": "#/definitions/Quantity"
        },
        "maxValueDate": {
          "type": "string",
          "format": "date"
        },
        "maxValueDateTime": {
          "type": "string",
          "format": "date-time"
        },
        "maxValueInstant": {
          "type": "string",
          "format": "date-time"
        },
        "maxValueTime": {
          "type": "string"
        },
        "maxValueDecimal": {
          "type": "number"
        },
        "maxValueInteger": {
          "type": "integer"
        },
        "maxValueQuantity": {
          "$ref": "#/definitions/Quantity"
        },
        "maxLength": {
          "type": "integer",
          "minimum": 0
        },
        "condition": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "fhir-id"
          }
        },
        "constraint": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ElementDefinitionConstraint"
          }
        },
        "mustSupport": {
          "type": "boolean"
        },
        "isModifier": {
          "type": "boolean"
        },
        "isModifierReason": {
          "type": "string"
        },
        "isSummary": {
          "type": "boolean"
        },
        "binding": {
          "$ref": "#/definitions/ElementDefinitionBinding"
        },
        "mapping": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ElementDefinitionMapping"
          }
        }
      },
      "required": ["path"],
      "additionalProperties": false
    },
    "ElementDefinitionSlicing": {
      "type": "object",
      "properties": {
        "discriminator": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ElementDefinitionSlicingDiscriminator"
          }
        },
        "description": {
          "type": "string"
        },
        "ordered": {
          "type": "boolean"
        },
        "rules": {
          "type": "string",
          "enum": ["closed", "open", "openAtEnd"]
        }
      },
      "required": ["rules"],
      "additionalProperties": false
    },
    "ElementDefinitionSlicingDiscriminator": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["value", "exists", "pattern", "type", "profile"]
        },
        "path": {
          "type": "string"
        }
      },
      "required": ["type", "path"],
      "additionalProperties": false
    },
    "ElementDefinitionBase": {
      "type": "object",
      "properties": {
        "path": {
          "type": "string"
        },
        "min": {
          "type": "integer",
          "minimum": 0
        },
        "max": {
          "type": "string"
        }
      },
      "required": ["path", "min", "max"],
      "additionalProperties": false
    },
    "ElementDefinitionType": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string",
          "format": "fhir-uri"
        },
        "profile": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "fhir-canonical"
          }
        },
        "targetProfile": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "fhir-canonical"
          }
        },
        "aggregation": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["contained", "referenced", "bundled"]
          }
        },
        "versioning": {
          "type": "string",
          "enum": ["either", "independent", "specific"]
        }
      },
      "required": ["code"],
      "additionalProperties": false
    },
    "ElementDefinitionExample": {
      "type": "object",
      "properties": {
        "label": {
          "type": "string"
        },
        "valueString": {
          "type": "string"
        },
        "valueBoolean": {
          "type": "boolean"
        },
        "valueInteger": {
          "type": "integer"
        },
        "valueDecimal": {
          "type": "number"
        },
        "valueUri": {
          "type": "string",
          "format": "uri"
        },
        "valueUrl": {
          "type": "string",
          "format": "uri"
        },
        "valueCode": {
          "type": "string"
        },
        "valueDate": {
          "type": "string",
          "format": "date"
        },
        "valueDateTime": {
          "type": "string",
          "format": "date-time"
        },
        "valueTime": {
          "type": "string"
        },
        "valueInstant": {
          "type": "string",
          "format": "date-time"
        },
        "valueCodeableConcept": {
          "$ref": "#/definitions/CodeableConcept"
        },
        "valueCoding": {
          "$ref": "#/definitions/Coding"
        },
        "valueQuantity": {
          "$ref": "#/definitions/Quantity"
        },
        "valuePeriod": {
          "$ref": "#/definitions/Period"
        },
        "valueRange": {
          "$ref": "#/definitions/Range"
        },
        "valueReference": {
          "$ref": "#/definitions/Reference"
        }
      },
      "required": ["label"],
      "additionalProperties": false
    },
    "ElementDefinitionConstraint": {
      "type": "object",
      "properties": {
        "key": {
          "type": "string",
          "format": "fhir-id"
        },
        "requirements": {
          "type": "string"
        },
        "severity": {
          "type": "string",
          "enum": ["error", "warning"]
        },
        "human": {
          "type": "string"
        },
        "expression": {
          "type": "string",
          "format": "fhirpath"
        },
        "xpath": {
          "type": "string"
        },
        "source": {
          "type": "string",
          "format": "fhir-canonical"
        }
      },
      "required": ["key", "severity", "human"],
      "additionalProperties": false
    },
    "ElementDefinitionBinding": {
      "type": "object",
      "properties": {
        "strength": {
          "type": "string",
          "enum": ["required", "extensible", "preferred", "example"]
        },
        "description": {
          "type": "string"
        },
        "valueSet": {
          "type": "string",
          "format": "fhir-canonical"
        }
      },
      "required": ["strength"],
      "additionalProperties": false
    },
    "ElementDefinitionMapping": {
      "type": "object",
      "properties": {
        "identity": {
          "type": "string",
          "format": "fhir-id"
        },
        "language": {
          "type": "string"
        },
        "map": {
          "type": "string"
        },
        "comment": {
          "type": "string"
        }
      },
      "required": ["identity", "map"],
      "additionalProperties": false
    }
  }
}